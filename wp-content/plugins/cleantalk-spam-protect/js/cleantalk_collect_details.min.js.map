{"version":3,"file":"cleantalk_collect_details.min.js","sources":["cleantalk_collect_details.js"],"sourcesContent":["/*\n Assign default values for backend variables.\n*/\nif (typeof ctCollectDetails === 'undefined') {\n    var ctCollectDetails = {};\n    ctCollectDetails.set_cookies_flag = true;\n}\n\nfunction ct_getCookie(name) {\n    var matches = document.cookie.match(new RegExp(\n        \"(?:^|; )\" + name.replace(/([\\.$?*|{}\\(\\)\\[\\]\\\\\\/\\+^])/g, '\\\\$1') + \"=([^;]*)\"\n    ));\n    return matches ? decodeURIComponent(matches[1]) : undefined;\n}\n\nfunction ct_setCookie(name, value)\n{\n    if (ctNocache.set_cookies_flag) {\n        var ctSecure = location.protocol === 'https:' ? '; secure' : '';\n        document.cookie = name+\" =; expires=Thu, 01 Jan 1970 00:00:01 GMT; path = /; samesite=lax\" + ctSecure;\n        document.cookie = name+\" =; expires=Thu, 01 Jan 1970 00:00:01 GMT; samesite=lax\" + ctSecure;\n\n        var date = new Date;\n        date.setDate(date.getDate() + 1);\n        setTimeout(function() {\n            var ctSecure = location.protocol === 'https:' ? '; secure' : '';\n            document.cookie = name+\"=\" + value + \"; expires=\" + date.toUTCString() + \"; path = /; samesite=lax\" + ctSecure;\n        }, 500);\n    }\n\n    return null;\n}\n\nif (!Date.now) {\n    Date.now = function() { return new Date().getTime(); }\n}\n\nif( ct_collect_details === undefined )\n{\n    var ct_collect_details = true;\n\n    var cleantalk_user_info={};\n\n    var cleantalk_screen_info={};\n\n    for(var prop in screen)\n    {\n        if (navigator[prop] instanceof Object || screen[prop]==='')\n            continue;\n        cleantalk_screen_info[prop]=screen[prop];\n    }\n\n    cleantalk_user_info.screen=cleantalk_screen_info;\n\n    var cleantalk_plugins=Array();\n    var prev;\n    var cnt=0;\n    for(var i=0;i<navigator.plugins.length;i++)\n    {\n        var plugin = navigator.plugins[i];\n        var plugin = plugin.name+\" \"+(plugin.version || '')\n        if (prev == plugin ) continue;\n        cleantalk_plugins[cnt]=plugin;\n        cnt++;\n        prev = plugin;\n    }\n    cleantalk_user_info.plugins=cleantalk_plugins;\n\n    cleantalk_user_info.timezone_offset = -new Date().getTimezoneOffset()/60;\n    cleantalk_user_info.datetime = Math.round((new Date().getTime())/1000);\n\n    cleantalk_user_info.browser_x=document.documentElement.clientWidth;\n    cleantalk_user_info.browser_y=document.documentElement.clientHeight;\n\n    var ua = navigator.userAgent.toLowerCase();\n    var flashInstalled = 0;\n    if (typeof(navigator.plugins)!=\"undefined\"&&typeof(navigator.plugins[\"Shockwave Flash\"])==\"object\")\n    {\n        flashInstalled = 1;\n    }\n    else if (typeof window.ActiveXObject != \"undefined\")\n    {\n        try\n        {\n            if (new ActiveXObject(\"ShockwaveFlash.ShockwaveFlash\"))\n            {\n                flashInstalled = 1;\n            }\n        } catch(e) {};\n    };\n\n    cleantalk_user_info.is_flash=flashInstalled;\n\n    isVisitedMain=-1;\n    if(location.href=='http://'+location.hostname+'/' || location.href=='https://'+location.hostname+'/')\n    {\n        isVisitedMain=1;\n        setTimeout(function () {\n            ct_setCookie('ct_visited_main',\n                '1')\n        }, 1500);\n    }\n\n\n    ct_visited_main = ct_getCookie('ct_visited_main');\n    if(ct_visited_main==undefined && isVisitedMain==-1)\n    {\n        isVisitedMain=0;\n    }\n    else\n    {\n        isVisitedMain=1;\n    }\n\n    cleantalk_user_info.is_main=isVisitedMain;\n\n    setTimeout(function () {\n        ctSetCookie(\n            'ct_user_info',\n            escape(JSON.stringify(cleantalk_user_info)));\n    }, 1500);\n\n}"],"names":["ctCollectDetails","ct_getCookie","name","matches","document","cookie","match","RegExp","replace","decodeURIComponent","undefined","ct_setCookie","value","ctSecure","date","ctNocache","set_cookies_flag","location","protocol","Date","setDate","getDate","setTimeout","toUTCString","now","getTime","ct_collect_details","cleantalk_user_info","cleantalk_screen_info","prop","screen","navigator","Object","prev","cleantalk_plugins","Array","cnt","i","plugins","length","plugin","version","timezone_offset","getTimezoneOffset","datetime","Math","round","browser_x","documentElement","clientWidth","browser_y","clientHeight","ua","userAgent","toLowerCase","flashInstalled","window","ActiveXObject","e","is_flash","isVisitedMain","href","hostname","ct_visited_main","is_main","ctSetCookie","escape","JSON","stringify"],"mappings":"AAGA,IACQA,iBAIR,SAASC,aAAaC,GAClB,IAAIC,EAAUC,SAASC,OAAOC,MAAM,IAAIC,OACpC,WAAaL,EAAKM,QAAQ,+BAAgC,QAAU,aAExE,OAAOL,EAAUM,mBAAmBN,EAAQ,SAAMO,EAGtD,SAASC,aAAaT,EAAMU,GAExB,IACQC,EAIAC,EAQR,OAbIC,UAAUC,mBACNH,EAAiC,WAAtBI,SAASC,SAAwB,WAAa,GAC7Dd,SAASC,OAASH,EAAK,oEAAsEW,EAC7FT,SAASC,OAASH,EAAK,0DAA4DW,GAE/EC,EAAO,IAAIK,MACVC,QAAQN,EAAKO,UAAY,GAC9BC,WAAW,WACP,IAAIT,EAAiC,WAAtBI,SAASC,SAAwB,WAAa,GAC7Dd,SAASC,OAASH,EAAK,IAAMU,EAAQ,aAAeE,EAAKS,cAAgB,2BAA6BV,GACvG,MAGA,KAOX,QAlCgC,IAArBb,mBACHA,iBAAmB,CACvBgB,kBAAoC,IA4BnCG,KAAKK,MACNL,KAAKK,IAAM,WAAa,OAAO,IAAIL,MAAOM,iBAGnBf,IAAvBgB,mBACJ,CACI,IAAIA,oBAAqB,EAErBC,oBAAoB,GAEpBC,sBAAsB,GAE1B,IAAI,IAAIC,QAAQC,OAERC,UAAUF,gBAAiBG,QAAyB,KAAfF,OAAOD,QAEhDD,sBAAsBC,MAAMC,OAAOD,OAGvCF,oBAAoBG,OAAOF,sBAK3B,IAHA,IACIK,KADAC,kBAAkBC,QAElBC,IAAI,EACAC,EAAE,EAAEA,EAAEN,UAAUO,QAAQC,OAAOF,IACvC,CACI,IAAIG,OAAST,UAAUO,QAAQD,GAE3BJ,OADAO,OAASA,OAAOtC,KAAK,KAAKsC,OAAOC,SAAW,OAEhDP,kBAAkBE,KAAKI,OACvBJ,MACAH,KAAOO,QAEXb,oBAAoBW,QAAQJ,kBAE5BP,oBAAoBe,kBAAmB,IAAIvB,MAAOwB,oBAAoB,GACtEhB,oBAAoBiB,SAAWC,KAAKC,OAAO,IAAI3B,MAAOM,UAAW,KAEjEE,oBAAoBoB,UAAU3C,SAAS4C,gBAAgBC,YACvDtB,oBAAoBuB,UAAU9C,SAAS4C,gBAAgBG,aAEvD,IAAIC,GAAKrB,UAAUsB,UAAUC,cACzBC,eAAiB,EACrB,QAA+B,IAApBxB,UAAiB,SAA8D,iBAAvCA,UAAUO,QAAQ,mBAEjEiB,eAAiB,OAEhB,QAAmC,IAAxBC,OAAOC,cAEnB,IAEQ,IAAIA,cAAc,mCAElBF,eAAiB,GAEvB,MAAMG,IAGZ/B,oBAAoBgC,SAASJ,eAE7BK,eAAe,EACZ3C,SAAS4C,MAAM,UAAU5C,SAAS6C,SAAS,KAAO7C,SAAS4C,MAAM,WAAW5C,SAAS6C,SAAS,MAE7FF,cAAc,EACdtC,WAAW,WACPX,aAAa,kBACT,MACL,OAIPoD,gBAAkB9D,aAAa,mBAG3B2D,cAFgBlD,MAAjBqD,kBAA8C,GAAhBH,cAEf,EAIA,EAGlBjC,oBAAoBqC,QAAQJ,cAE5BtC,WAAW,WACP2C,YACI,eACAC,OAAOC,KAAKC,UAAUzC,wBAC3B"}